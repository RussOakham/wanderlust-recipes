{% extends "base.html" %}

{% block content %}
<!-- Website Banner -->
<section>
    <div class="wanderlust-banner">

    </div>
</section>

<!-- h1 visually hidden with CSS but available to assistive technology - brand visibile in hero banner -->
<!-- https://wdn.unl.edu/page-title-h1-best-practices -->
<h1 class="hidden-h1">Wanderlust Recipes</h1>

<!-- Search Section -->
<section>
    <div>
        <form action="{{ url_for('search') }}" method="POST" class="col s12">
            <div class="row center-align">
                <div class="input-field col s12">
                    <i class="fas fa-search prefix"></i>
                    <input type="text" name="query" id="query" class="validate" minlength="3" required>
                    <label for="query">Search by Recipe Name or Ingredients</label>
                </div>
                <div class="col s12">
                    <a href="{{ url_for('get_recipes') }}" class="btn-small bold">Reset</a>
                    <button type="submit" class="btn-small bold">
                        <i class="fas fa-search left"></i>
                        Search
                    </button>
                </div>
            </div>
        </form>
    </div>
</section>

{% if recipes.count() > 0 %}
<!-- Latest Recipes -->
<!-- Create div based off recipe db info - Odd no. loop has image on left -->
<section>
    <h2 class="center-align">Latest Recipes</h2>

    {% for recipe in recipes %}

    {% if loop.index % 2 !=0 %}

    <div class="row recipe-panel box-shadow border-radius box-border center-align">
        <div class="col m4 s12 recipe-img-container">
            <img src="{{ recipe.image_upload_url }}" class="recipe-image" alt="{{ recipe.recipe_title }}">
        </div>
        <div class="col m8 s12">
            <h3 class="recipe-title-link"><a href="/recipes/{{ recipe.url }}">{{ recipe.recipe_title }}</a></h3>
            <p>{{ recipe.recipe_description }}</p>
            <p><em>by: {{ recipe.created_by|capitalize }}</em></p>
            <div class="recipe-info">
                <div class="col m4 s12 bold">
                    <h6><i class="fas fa-utensils"></i> Serves:</h6>
                    <p>{{ recipe.servings }}</p>
                </div>
                <div class="col m4 s12 bold">
                    <h6>Rating:</h6>
                    <ul class="recipe-rating-home">
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star"></span>
                        <span class="fa fa-star"></span>
                    </ul>
                </div>
                <div class="col m4 s12 bold">
                    <h6><i class="fas fa-clock"></i> Time:</h6>
                    <p>
                        Prep: {{ recipe.prep_minutes }} mins
                        <br>
                        Cook: {{ recipe.cook_minutes }} mins
                    </p>
                </div>
            </div>
        </div>
    </div>

    {% else %}

    <div class="row recipe-panel box-shadow border-radius box-border center-align  flex-column-reverse">
        <div class="col m8 s12">
            <h3 class="recipe-title-link"><a href="/recipes/{{ recipe.url }}">{{ recipe.recipe_title }}</a></h3>
            <p>{{ recipe.recipe_description }}</p>
            <p><em>by: {{ recipe.created_by|capitalize }}</em></p>
            <div class="recipe-info">
                <div class="col m4 s12 bold">
                    <h6><i class="fas fa-utensils"></i> Serves:</h6>
                    <p>{{ recipe.servings }}</p>
                </div>
                <div class="col m4 s12 bold">
                    <h6>Rating:</h6>
                    <ul class="recipe-rating-home">
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star"></span>
                        <span class="fa fa-star"></span>
                    </ul>
                </div>
                <div class="col m4 s12 bold">
                    <h6><i class="fas fa-clock"></i> Time:</h6>
                    <p>
                        Prep: {{ recipe.prep_minutes }} mins
                        <br>
                        Cook: {{ recipe.cook_minutes }} mins
                    </p>
                </div>
            </div>
        </div>
        <div class="col m4 s12 recipe-img-container">
            <img src="{{ recipe.image_upload_url }}" class="recipe-image" alt="{{ recipe.recipe_title }}">
        </div>
    </div>

    {% endif %}

    {% endfor %}
</section>

{% else %}
<!-- Display if returned index length = 0 -->
<section>
    <h2 class="center-align">No Results Found</h3>
</section>
{% endif %}

{% endblock %}

<!-- Add in to template -->
{{ recipe.category_name }}<br>